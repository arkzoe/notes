- 会话技术
- 用户打开浏览器，访问web服务器，会话建立，一方断开连接，会话结束
- 会话跟踪：一种维护浏览器状态的方法，服务器需多次识别请求是否来源于同一浏览器，在同一会话的多次请求间共享数据
- 客户端会话跟踪：Cookie
	- http协议支持
	- 请求Cookie：name-value
	- 响应Set-Cookie：name-value
	- 缺
		- 移动端无法使用
		- 用户可禁
		- 不能跨域
- 服务端：Session
	- 请求Cookie：JSESSIONID=
	- 响应Set-Cookie：JSESSIONID=
	- 存储服务器
	- 均衡负载nginx
		- 集群无法直接使用
# 令牌
- 支持pc，移动
- 解决集群环境认证问题
- 减轻服务器存储压力
- 自己实现
## JWT令牌
- 第一部分：Header(头)，记录令牌类型、签名算法等。例如：{"alg"："HS256"，"type"："JWT"}
- 第二部分：Payload(有效载荷)，携带一些自定义信息、默认信息等。例如：{"id"："1"，"username"："Tom"}
- 第三部分：Signature(签名)，防止Token被篡改、确保安全性。将header、payload融入，并加入指定秘钥，通过指定签名算法计算而来
1. 引入jjwt依赖
2. 调用官方工具JWTs生成解析jwt令牌
	- Jwts.builder().signwith(xx).addClaims(x)
		- .setExpiration(x)
		- .compact()
	- Jwts.parser().setSigningKey()
		- .parseClaimsJws()
		- .getBody()
## 过滤器
- javaweb三大组件servlet，filter，listener
- 拦截资源请求
- 通用操作：登录校验、同一编码处理、敏感字符处理
1. 定义Filter：定义一个类,实现 Filter 接口,并实现其所有方法
2. 配置Filter：Filter类上加awebFilter注解,配置拦截路径。引导类上加 aServletComponentScan 开启Servlet组件支持

| 拦截路径 | urlPatterns值 |
| -------- | ------------- |
| 具体路径 | /login        |
| 目录拦截 | /emps/*       |
| 拦截所有 | /*            |
## 拦截器
- 是一种动态拦截方法调用的机制,类似于过滤器。Spring框架中提供的,主要用来动态拦截控制器方法的执行
- 拦截请求,在指定的方法调用前后,根据业务需要执行预先设定的代码
1. 定义拦截器,实现HandlerInterceptor接口,并实现其所有方法
2. 注册拦截器

| 拦截路径  | 含义                 |                                                  |
| --------- | -------------------- | ------------------------------------------------ |
| /*        | 一级路径             | 能匹配/depts,/emps,/login,不能匹配/depts/1       |
| /**       | 任意级路径           | 能匹配/depts,/depts/1,/depts/1/2                 |
| /depts/*  | /depts下的一级路径   | 能匹配/depts/1,不能匹配/depts/1/2,/depts         |
| /depts/** | /depts下的任意级路径 | 能匹配/depts,/depts/1,/depts/1/2,不能匹配/emps/1 |
