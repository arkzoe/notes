- 一对多/多对一
	- 在多的一方建立外键
- 多对多
	- 建立中间表，关联两方主键
- 一对一
	- 单表拆分
	- 基础字段放一张表，详细字段放另一张表
	- 任意一方加外键，设置外键唯一
# 查询
- 笛卡尔积
	- 数学中，两个集合组合的所有情况，多表查询需要消除无效的笛卡尔积
## 分类
### 连接查询
#### 内连接
- 查询交集部分
- 隐式
```mysql
SELECT 字段列表 FROM 表1,表2 WHERE 条件...;
-- 起别名 方便操作
```
- 显式
```mysql
SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 连接条件...;
```
#### 外连接
- 左外：查询左表所有数据，及两表交集部分
```mysql
SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件...;
```
- 右外：查询右表所有数据，及两表交集部分
```mysql
SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件...;
```
#### 自连接
- 当前表与自身的连接查询，必须使用表别名
- 可以是内连接/外连接
```mysql
SELECT 字段列表 FROM 表A 表名A JOIN 表A 别名B ON 条件...;
```
#### 联合查询-union，union all
- 把多次查询结果合并，形成一个新的查询结果集
```mysql
SELECT 字段列表 FROM 表A...
UNION [ALL]
SELECT 字段列表 FROM 表B...;
```
- union合并后去重
- 列数、字段类型必须保持一致
### 子查询
- SQL中嵌套SELECT，嵌套查询，子查询
```mysql
SELECT 字段列表 FROM 表A WHERE column1 操作符 (SELECT column1 FROM 表B)
```
- 外部是增/删/改/查任意一个
- 位置--之后
	- WHERE
	- FROM
	- SELECT
- 根据结果分
#### 标量
- 结果为单个值
- 操作符-比较符
#### 列
- 结果为一列
- 操作符：IN、NOT IN、ANY、SOME、ALL
![[列子查询.png]]
#### 行
- 结果为一行
- 操作符：=、<>、IN、NOT IN
#### 表
- 结果为多行多列
- 操作符：IN