# 错误日志
- 出现故障无法使用时查看
- 默认开启，目录/var/log/，默认名mysqld.log
- 查看日志位置
```mysql
show variables like '%log_error%';
```
# 二进制日志
- 记录所有DDL，DML，不包括数据查询
- 灾难时数据恢复，主从复制
- MySQL8默认开启
```mysql
show variables like '%log_bin%';
```

| 日志格式      | 含义                                   |
| --------- | ------------------------------------ |
| STATEMENT | 基于SQL语句的日志记录，记录SQL语句，对数据进行修改的SQL都会记录 |
| ROW       | 基于行的日志记录，记录的是没一行的数据变更--默认            |
| MIXED     | 混合采用上述两种格式，默认STATEMENT，特殊情况ROW       |
```mysql
show variables like '%binlog_format%';
```
- mysqlbinlog查看
```shell
mysqlbinlog [] logfilename
-d       指定数据库名，只列出指定的数据库相关操作
-o       忽略掉日志中的前n行
-v       将行事件（数据变更）重构为SQL
-w       将行事件（数据变更）重构为SQL，并输出注释信息
```
- 删除日志

| 指令                                               |                                     |
| ------------------------------------------------ | ----------------------------------- |
| reset master                                     | 删除全部binlog日志，删除之后日志编号从binlog000001  |
| purge master logs to 'binlog.***'                | 删除编号之前的所有日志                         |
| purge masrer logs before 'yyyy-mm-dd hh24:mi:ss' | 删除日志为'yyyy-mm-dd hh24:mi:ss'之前产生的日志 |
# 查询日志
- 记录所有操作语句，默认未开启
```mysql
show variables like '%general%';
```
- 修改/etc/my.cnf
```
# 开启
general_log=1
# 设置日志文件名，默认host_name.log
general_log_file=mysql_query.log
```
# 慢查询日志
- 执行时间超过long_query_time，扫描记录数不小于min_examined_row_limit
- 默认未开启。long_query_time默认10秒，最小为0，精度到微秒
```
# 开启
slow_query_log=1
# 执行时间参数
long_query_time=
```
- 默认情况，不记录管理语句、不使用索引查找的查询
- 用log_slow_admin_statement和log_queries_not_using_indexes更改
```
# 记录执行慢的管理语句
log_slow_admin_statement=1
# 记录执行慢的未使用索引的语句
log_queries_not_using_indexes=1
```